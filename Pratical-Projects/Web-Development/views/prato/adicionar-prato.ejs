<% layout('layout') %> <% title = 'Adicionar Prato' %> <% styles = `<link
  href="/stylesheets/formStyle.css"
  rel="stylesheet"
/>` %>

<div class="form-container">
  <h2 class="text-center mb-4 text-laranja">üçΩÔ∏è Adicionar Novo Prato</h2>

  <% if (erro) { %>
  <div class="alert alert-danger"><%= erro %></div>
  <% } %>

  <form action="/prato/adicionar" method="POST" enctype="multipart/form-data">
    <div class="mb-3">
      <label class="form-label">Nome do Prato</label>
      <input type="text" name="nome" class="form-control" required />
    </div>

    <div class="mb-3">
      <label class="form-label">Descri√ß√£o</label>
      <textarea name="descricao" class="form-control" rows="3"></textarea>
    </div>

    <div class="mb-3">
      <label class="form-label">Pre√ßo (‚Ç¨)</label>
      <input
        type="number"
        step="0.01"
        min="0"
        name="preco"
        class="form-control"
        required
      />
    </div>

    <div class="mb-3">
      <label class="form-label">Categoria</label>
      <select name="categoria" class="form-select" required>
        <option value="">Seleciona uma categoria</option>
        <option value="Entrada">Entrada</option>
        <option value="Prato Principal">Prato Principal</option>
        <option value="Sobremesa">Sobremesa</option>
        <option value="Bebida">Bebida</option>
      </select>
    </div>

    <div class="mb-3">
      <label class="form-label">Informa√ß√£o Nutricional</label>
      <textarea name="infoNutricional" class="form-control" rows="2"></textarea>
    </div>

    <div class="mb-3">
      <label class="form-label"
        >Al√©rgenos
        <small class="text-muted">(separados por v√≠rgula)</small></label
      >
      <input
        type="text"
        name="alergenios"
        class="form-control"
        placeholder="Ex: leite, gl√∫ten"
      />
    </div>

    <div class="mb-3">
      <label class="form-label"
        >Tipos de Dose
        <small class="text-muted">(separados por v√≠rgula)</small></label
      >
      <input
        type="text"
        name="tipoDose"
        class="form-control"
        placeholder="Ex: normal, grande"
      />
    </div>

    <div class="mb-3">
      <label class="form-label">Imagem do Prato</label>
      <input
        type="file"
        name="imagemPrato"
        class="form-control"
        required
        onchange="previewImagem(event)"
      />
      <img
        id="preview-img"
        src="#"
        alt="Preview"
        class="img-preview d-none mt-2"
      />
    </div>

    <div class="buttons-container">
      <button type="submit" class="create-btn">Adicionar Prato</button>
    </div>

    <a href="/prato/listar" class="btn btn-link mt-3 w-100">‚Üê Voltar √† Lista</a>
  </form>
</div>

<% scripts = `
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  function previewImagem(event) {
    const img = document.getElementById("preview-img");
    img.src = URL.createObjectURL(event.target.files[0]);
    img.classList.remove("d-none");
  }
</script>
` %>
