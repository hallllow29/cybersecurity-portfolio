<% layout('layout') %> <% title = 'Menus do Restaurante' %> <% styles = `
<link href="/stylesheets/menu/listarMenu.css" rel="stylesheet" />
` %>

<div class="container">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="page-title">📋 Menus do Restaurante</h1>
    <a href="/restaurante/dashboard" class="btn btn-orange"
      >🔙 Voltar ao Dashboard</a
    >
  </div>

  <div class="text-center mb-4">
    <a href="/menu/criar" class="btn btn-orange px-4">➕ Criar Novo Menu</a>
  </div>

  <% if (menus.length === 0) { %>
  <div class="alert alert-info text-center">Ainda não tens menus criados.</div>
  <% } else { %>
  <div class="row">
    <% menus.forEach(menu => { %>
    <div class="col-md-6 col-lg-4 mb-4">
      <div class="menu-card p-3 h-100 d-flex flex-column justify-content-between">
        <div class="menu-img-container mb-3">
          <img src="<%= menu.imagem || '/images/fallback-menu.jpg' %>" alt="Imagem do Menu" class="menu-img" />
        </div>
        
        <h5 class="menu-title"><%= menu.nome %></h5>
        <p><%= menu.descricao || "Sem descrição" %></p>
      
        <% if (menu.pratos.length > 0) { %>
          <p class="fw-semibold mb-1">Pratos:</p>
          <ul class="prato-lista">
            <% menu.pratos.forEach(prato => { %>
            <li><%= prato.nome %> (€<%= prato.preco.toFixed(2) %>)</li>
            <% }) %>
          </ul>
        <% } else { %>
          <p class="no-pratos">Nenhum prato adicionado.</p>
        <% } %>
      
        <div class="mt-3 menu-actions">
          <a href="/menu/<%= menu._id %>/editar" class="btn btn-sm btn-warning">✏️ Editar</a>
          <a href="/menu/<%= menu._id %>/detalhes" class="btn btn-sm btn-info text-white">🔍 Ver</a>
          <form action="/menu/<%= menu._id %>/apagar" method="POST" class="d-inline">
            <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Tens a certeza que queres apagar este menu?')">
              🗑 Remover
            </button>
          </form>
        </div>
      
      </div> 
    </div>
    <% }) %>
  </div>
  <% } %>
</div>

<% scripts = `
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
` %>
